webpackJsonp([1],{"13bX":function(e,t){},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=o("VU/8")({name:"App"},r,!1,function(e){o("jWSq")},null,null).exports,l=o("/ocq"),d=o("mvHQ"),s=o.n(d),a={name:"TreeView",props:["root_comp","tree","folder_id","to_fold","highlighted_note","highlighted_folder"],computed:{is_highlighted_folder:function(){return console.log("h_f: ",this.highlighted_folder),this.folder_id===this.highlighted_folder},is_folded:function(){return this.to_fold.indexOf(this.folder_id)>-1},folder:function(){return this.tree.folders[this.folder_id]}},methods:{is_highlighted_note:function(e){return console.log("h_note: ",this.highlighted_note),e.id===this.highlighted_note},child_notes:function(){for(var e=this.folder.notes,t=[],o=0;o<e.length;++o){var n=e[o],r=this.tree.notes[n];t.push(r)}return t},child_folders:function(e){for(var t=[],o=this.folder.folders,n=0;n<o.length;++n){e=o[n];var r=this.tree.folders[e];t.push(r)}return t},select_folder:function(e){console.log("clicked folder"),this.$emit("select_folder",e)},select_note:function(e){console.log("clicked note"),this.$emit("select_note",e)},open_note:function(e){console.log("opening note"),this.$emit("open_note",e)}}},_={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"tree-view outer-div"},[o("div",{staticClass:"file_entry folder_entry",class:{highlighted_folder:e.is_highlighted_folder},on:{click:function(t){e.select_folder(e.folder)}}},[o("strong",[e._v("F")]),e._v(" "+e._s(e.folder?e.folder.name:"")+" "),o("strong",[e._v(e._s(e.is_folded?"{...}":""))])]),e._v(" "),e.is_folded?e._e():[o("div",{staticClass:"folder-div"},[e._l(e.child_notes(),function(t){return o("div",{key:t.id,staticClass:"file_entry note_entry",class:{highlighted_note:e.is_highlighted_note(t)},on:{click:function(o){e.select_note(t)},dblclick:function(o){e.open_note(t)}}},[o("strong",[e._v("N")]),e._v(" "+e._s(t.name)+"\n    ")])}),e._v(" "),e._l(e.child_folders(),function(t){return[o("tree-view",{key:t.id,attrs:{tree:e.tree,folder_id:t.id,to_fold:e.to_fold,highlighted_note:e.highlighted_note,highlighted_folder:e.highlighted_folder},on:{select_folder:e.select_folder,select_note:e.select_note,open_note:e.open_note}})]})],2)]],2)},staticRenderFns:[]};var c=o("VU/8")(a,_,!1,function(e){o("W8+M")},null,null).exports,f={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("modal",{attrs:{name:e.modalName}},[o("div",{staticClass:"modal_body"},[e._t("default"),e._v(" "),e.errors?o("div",{staticClass:"error_msg"},[o("strong",[e._v("error")]),e._v(" the name can't be empty\n    ")]):e._e(),e._v(" "),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{placeholder:e.placeholder},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),o("div",{staticClass:"action_footer"},[o("button",{on:{click:e.submit}},[e._v("submit")])])],2)])},staticRenderFns:[]};var h={name:"Mover",props:["modalName","current_folder","tree","to_fold","highlighted_note"],components:{TreeView:c},data:function(){return{new_folder:null,error:null}},methods:{submit:function(){null===this.new_folder?this.error="you must select a folder":(this.$emit("done",this.new_folder),this.$modal.hide(this.modalName))},select_folder:function(e){this.new_folder=e}}},u={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("modal",{attrs:{name:e.modalName,height:"auto",scrollable:""}},[o("div",{staticClass:"modal_body"},[o("h1",[e._v("choose a new folder")]),e._v(" "),e.error?o("div",{staticClass:"error_msg"},[o("strong",[e._v("error")]),e._v(" "+e._s(e.error)+"\n    ")]):e._e(),e._v(" "),o("p",[o("strong",[e._v("new folder")]),e._v(" "+e._s(e.new_folder?e.new_folder.name:"select a folder")+"\n    ")]),e._v(" "),o("div",{staticClass:"action_footer"},[o("button",{on:{click:e.submit}},[e._v("submit")])]),e._v(" "),o("tree-view",{attrs:{tree:e.tree,folder_id:e.tree.root_folder_id,to_fold:e.to_fold,highlighted_note:e.highlighted_note,highlighted_folder:e.new_folder?e.new_folder.id:null},on:{select_folder:e.select_folder}})],1)])},staticRenderFns:[]};var m={notes:{},folders:{0:{id:0,name:"placeholder",parent_folder_id:null,folders:[],notes:[]}},root_folder_id:0},v={name:"FileTree",data:function(){return{folder:null,note:null,tree:m}},components:{TreeView:c,NamePicker:o("VU/8")({name:"NamePicker",data:function(){return{name:"",errors:!1}},props:["modalName","placeholder"],methods:{submit:function(){""===this.name?this.errors=!0:(this.$emit("done",this.name),this.$modal.hide(this.modalName))},is_valid:function(){}}},f,!1,function(e){o("ScV4")},null,null).exports,Mover:o("VU/8")(h,u,!1,function(e){o("pLf5")},null,null).exports},mounted:function(){this.update_tree()},methods:{update_tree:function(e){var t=this;this.axios.get("api/file_tree").then(function(o){t.tree=o.data,e&&e(),console.log("tree: "),console.log(s()(t.tree,null," "))})},select_note:function(e){this.note=e,this.folder=this.tree.folders[e.parent_folder_id]},select_folder:function(e){this.folder=e},open_note:function(e){this.$router.push({name:"Note",params:{id:e.id}})},create_note:function(){var e=this;if(this.folder){var t={folder_id:this.folder.id};this.axios.post("api/create_note",t).then(function(t){e.open_note(t.data)})}else console.error("no folder selected")},try_move_note:function(){this.$modal.show("move_note")},move_note:function(e){if(console.log("move note"),this.note){var t={note_id:this.note.id,new_parent_folder_id:e.id},o=this;this.axios.post("/api/move_note",t).then(function(e){var t=e.data;o.update_tree(function(){o.select_note(t)})})}else console.error("no note selected")},delete_note:function(){if(console.log("del note"),this.note){var e=this,t={note_id:this.note.id};this.axios.post("/api/destroy_note",t).then(function(t){e.note=null,e.update_tree()})}else console.error("no note selected")},try_rename_note:function(){this.$modal.show("rename_note")},rename_note:function(e){if(this.note){var t=this,o={new_name:e,note_id:this.note.id};this.axios.post("/api/rename_note",o).then(function(e){var o=e.data;t.update_tree(function(){t.select_note(o)})})}else console.error("no note selected")},try_create_folder:function(){this.$modal.show("create_folder")},create_folder:function(e){if(console.log("creating a folder"),this.folder){var t=this,o={name:e,parent_folder_id:this.folder.id};this.axios.post("api/create_folder",o).then(function(e){t.update_tree()})}else console.error("no folder selected")},try_move_folder:function(){this.$modal.show("move_folder")},move_folder:function(e){if(console.log("moving folder"),this.folder){var t=this,o={folder_id:this.folder.id,new_parent_folder_id:e.id};this.axios.post("/api/move_folder",o).then(function(e){var o=e.data;t.update_tree(function(){t.select_folder(o)})})}else console.error("no folder selected")},delete_folder:function(){if(console.log("delete folder"),this.folder){var e={folder_id:this.folder.id},t=this;this.axios.post("api/destroy_folder",e).then(function(e){t.note=null,t.folder=null,t.update_tree()})}else console.error("no folder selected")},try_rename_folder:function(){this.$modal.show("rename_folder")},rename_folder:function(e){if(console.log("renaming note"),this.folder){var t=this,o={new_name:e,folder_id:this.folder.id};this.axios.post("/api/rename_folder",o).then(function(e){var o=e.data;t.update_tree(function(){t.folder=o})})}else console.error("no folder selected")}}},p={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"file_tree"},[o("h1",[e._v("welcome to mote")]),e._v(" "),o("div",{staticClass:"tree_buttons"},[o("div",{staticClass:"note_buttons"},[o("button",{attrs:{disabled:!e.folder},on:{click:e.create_note}},[e._v("create note")]),e._v(" "),o("button",{attrs:{disabled:!e.note},on:{click:e.try_move_note}},[e._v("move note")]),e._v(" "),o("button",{attrs:{disabled:!e.note},on:{click:e.try_rename_note}},[e._v("rename note")]),e._v(" "),o("button",{attrs:{disabled:!e.note},on:{click:e.delete_note}},[e._v("delete note")])]),e._v(" "),o("div",{staticClass:"folder_buttons"},[o("button",{attrs:{disabled:!e.folder},on:{click:e.try_create_folder}},[e._v("create folder")]),e._v(" "),o("button",{attrs:{disabled:!e.folder},on:{click:e.try_move_folder}},[e._v("move folder")]),e._v(" "),o("button",{attrs:{disabled:!e.folder},on:{click:e.try_rename_folder}},[e._v("rename folder")]),e._v(" "),o("button",{attrs:{disabled:!e.folder},on:{click:e.delete_folder}},[e._v("delete folder")])])]),e._v(" "),o("p",[o("strong",[e._v("selected folder")]),e._v(" "+e._s(e.folder?e.folder.name:"none")+"\n  ")]),o("p",[o("strong",[e._v("selected note")]),e._v(" "+e._s(e.note?e.note.name:"none")+"\n  ")]),e._v(" "),o("tree-view",{staticClass:"file_view",attrs:{tree:e.tree,folder_id:e.tree.root_folder_id,to_fold:[],highlighted_note:e.note?e.note.id:null,highlighted_folder:e.folder?e.folder.id:null},on:{select_folder:e.select_folder,select_note:e.select_note,open_note:e.open_note}}),e._v(" "),o("name-picker",{attrs:{modalName:"create_folder",placeholder:"pick a name"},on:{done:e.create_folder}},[o("h1",[e._v("folder name:")])]),e._v(" "),o("name-picker",{attrs:{modalName:"rename_folder",placeholder:e.folder?e.folder.name:""},on:{done:e.rename_folder}},[o("h1",[e._v("rename folder:")])]),e._v(" "),o("name-picker",{attrs:{modalName:"rename_note",placeholder:e.note?e.note.name:""},on:{done:e.rename_note}},[o("h1",[e._v("rename note")])]),e._v(" "),o("mover",{attrs:{modalName:"move_note",current_folder:e.folder,tree:e.tree,to_fold:[],highlighted_note:e.note?e.note.id:null},on:{done:e.move_note}}),e._v(" "),o("mover",{attrs:{modalName:"move_folder",current_folder:e.folder,tree:e.tree,to_fold:e.folder?[e.folder.id]:[],highlighted_note:null},on:{done:e.move_folder}})],1)},staticRenderFns:[]};var g=o("VU/8")(v,p,!1,function(e){o("pwgL")},null,null).exports,w={name:"NoteView",data:function(){return{note_id:-1,new_name:"",new_content:""}},mounted:function(){this.note_id=this.$route.params.id;var e={note_id:this.note_id},t=this;this.axios.post("/api/note",e).then(function(e){var o=e.data;t.new_name=o.name,t.new_content=o.content})},methods:{return_to_files:function(){""===this.new_name&&(this.new_name="untitled");var e={note_id:this.note_id,new_name:this.new_name,new_content:this.new_content},t=this;this.axios.post("/api/update_note",e).then(function(e){console.log("note updated!"),t.$router.go(-1)})}}},b={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"note_view",attrs:{id:"note-view"}},[o("div",[o("button",{on:{click:e.return_to_files}},[e._v("back")])]),e._v(" "),o("div",{staticClass:"inner_note_view"},[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.new_name,expression:"new_name"}],staticClass:"name_input",domProps:{value:e.new_name},on:{input:function(t){t.target.composing||(e.new_name=t.target.value)}}})]),e._v(" "),o("div",{staticClass:"content_div"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.new_content,expression:"new_content"}],staticClass:"content_area",domProps:{value:e.new_content},on:{input:function(t){t.target.composing||(e.new_content=t.target.value)}}})])])])},staticRenderFns:[]};var k=o("VU/8")(w,b,!1,function(e){o("13bX")},null,null).exports;n.a.use(l.a);var y=new l.a({routes:[{path:"/",name:"FileTree",component:g},{path:"/note/:id",name:"Note",component:k}]}),x=o("mtWM"),N=o.n(x),$=o("Rf8U"),C=o.n($),V=o("rifk"),F=o.n(V);N.a.defaults.baseURL="https://mote-note.herokuapp.com/",n.a.use(C.a,N.a),n.a.use(F.a),n.a.config.productionTip=!1,new n.a({el:"#app",router:y,components:{App:i},template:"<App/>"})},ScV4:function(e,t){},"W8+M":function(e,t){},jWSq:function(e,t){},pLf5:function(e,t){},pwgL:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.654acc548e47da6d7f20.js.map